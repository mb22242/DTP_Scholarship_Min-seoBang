{% extends 'base_admin.html' %}

{% block head %}

{% endblock %}

{% block body %}



<div id="admin_page_container">
    <div id="admin_menu">
        <a id='create_new' href="/admin/upload">Create New Item</a>
        <form method="GET" action="{{ url_for('search_admin') }}">
            <input id="search_box" type="text" name="item" id="item" value="Search:" onclick="if(this.value=='Search:'){this.value='';}" onblur="if(this.value==''){this.value='Search:';}">
        </form>

        
    </div>

    <div id="filter_button_container">
        {% set current_category = request.args.get('category', 'All') %}
        <a class="filter-btn {% if current_category == 'Clothing and Accessories' %}active{% endif %}" href="{{ url_for('admin_filter', category='Clothing and Accessories', item=request.args.get('item','')) }}" >
            Clothing and Accessories
        </a>
        <a class="filter-btn {% if current_category == 'Electronics' %}active{% endif %}" href="{{ url_for('admin_filter', category='Electronics', item=request.args.get('item','')) }}">
            Electronics
        </a>
        <a class="filter-btn {% if current_category == 'Stationery' %}active{% endif %}" href="{{ url_for('admin_filter', category='Stationery', item=request.args.get('item','')) }}">
            Stationery
        </a>
        <a class="filter-btn {% if current_category == 'Personal Items' %}active{% endif %}" href="{{ url_for('admin_filter', category='Personal Items', item=request.args.get('item','')) }}">
            Personal Items
        </a>
        <a class="filter-btn {% if current_category == 'Jewellery' %}active{% endif %}" href="{{ url_for('admin_filter', category='Jewellery', item=request.args.get('item','')) }}">
            Jewellery
        </a>
        <a class="filter-btn {% if current_category == 'Sports Equipment' %}active{% endif %}" href="{{ url_for('admin_filter', category='Sports Equipment', item=request.args.get('item','')) }}">
            Sports Equipment
        </a>
        <a class="filter-btn {% if current_category == 'Miscellaneous' %}active{% endif %}" href="{{ url_for('admin_filter', category='Miscellaneous', item=request.args.get('item','')) }}">
            Miscellaneous
        </a>

        <a class="filter-btn" href="{{ url_for('admin_filter', category='', item=request.args.get('item','')) }}">
            View All
        </a>
    </div>

    {% for message in get_flashed_messages() %}
        <div class="flash_message">
            {{ message }}
        </div>
    {% endfor %}

    {% for item in items %}
        <div id="admin_gallery_item">

            <img id='admin_gallery_image' src="{{ url_for('static', filename='uploads/' + item['image_filename']) }}">

            <div id="admin_gallery_item_info">
                <div id="info_text">
                    <h2>{{ item['item_name'] }}</h2>
                    <p>Name: {{ item['name'] }}</p>
                    <p>Description: {{ item['description'] }}</p>
                    <p>Category: {{ item['category'] }}</p>
                </div>

                <div id="item_buttons">
                    <form action="{{ url_for('delete_item', id=item['id']) }}" method="POST">
                        <button id="item_button" type="submit" onclick="return confirm('Are you sure you want to delete this item?');" style="background: #ed0000;">Delete</button>
                    </form>
    
                    <form action="{{ url_for('update_item', id=item['id']) }}" method="GET" style="display:inline;">
                        <button id="item_button" type="submit">Edit</button>
                    </form>
                </div>
            </div>
        </div>
    {% endfor %}

</div>
{% endblock %}